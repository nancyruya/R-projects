looking at changes of telehealth use among Medicare beneficiaries, which is under rapid change due to COVID-19. 
2017 data for now
 
 
https://data.cms.gov/Medicare-Physician-Supplier/Medicare-Provider-Utilization-and-Payment-Data-Phy/fs4p-t5eq/data  

Medicare Provider Utilization and Payment Data: Physician and Other Supplier PUF CY2017.
The original data is too big to download, so it’s better to subset by selecting/filter with specified HCPCS codes. 
LIST OF MEDICARE TELEHEALTH SERVICES
CY 2017

 
https://pubmed.ncbi.nlm.nih.gov/31759960/

----------------
summary statistic, mean, standard deviation, median, interquartile range (25th and 75th percentile, min, max

get density

numerator, service
adjust for population,
if state have more Medicare pt., need more services,
get data for state level Medicare population
 
public use file

summary statistic, mean, standard deviation, median, interqutile range, normal range
download: state/county table all beneficiaries

telehealth for part a and part b 

total state number part a and part b in denominator

rate of telemeds use is 1.83 per 1000 beneficiaries: total service in CA / by total number beneficiaries with part a and part b * 1000 : for every 1000 enrolle they use 1.8 services on 2017

extract county is state total, in different states, extract , I want number in D column:
excel: state, count (state total), FFS (part A and B)-fee for service
and merge services as telemeds sum, merge by state, calculate “Rate”,

could map these, box plot, regression…

generate map base on rate , chropleth map in R, tidycensus R 

CMS…
-------------------------
Df$rate <- df[,3]/df[,4]
Df$rate <- df$NumberServices/df$Beneficiaries

Tmap R packages
https://cran.r-project.org/web/packages/tmap/vignettes/tmap-getstarted.html

Get the shap file ,  need library, add data, map them, merge state

Tweak a little bit from my previous way


Map using quantiles, change to different levels

Moving forward:
Each state how many unique NPI is there,  NYS 100 unique, NJ? 
Unique NPI/total service (FFS pop)
Column numberMD
MDPerFFS
-------------------------
In future: 
 In paper, we may change the lable as percentile.
 May do an regression in state level, density rate, how it represent social economic of state.
 
idea: Census Bureau; Prefix, survey give percentage of population having diabetes, tide to service
Eg. One service map is smoking cessation, tide to population smoker, positive correlation? And service that used?
What variable to include? Download data, similar to gun violence study. 
Separately by the services: E service code, group them, summarize them, etc.
State level variation or change from 2016 to 2017, to...
Currently focus on geographic, not able to do time trend since no data for 2018 after.


Todo:
2016 dataset
Append/stack the data, column combine, stack them, two map one is 2016 and one 2017 side by side.    Put two graph in one 

Write up how I did the 2016. (see previous paper)
https://www.sciencedirect.com/science/article/abs/pii/S0012369219342230?via%3Dihub
where I get from denominator and numerator, interpret result 
if interesting variable could be added to regression. 

Grid package
Bookdown.org/rdpeng/RProgDA/the-grid-package.html

Gtable package

Ggpubr
Rpkgs.datanovia.com/ggpubr

https://cran.r-project.org/web/packages/gridExtra/vignettes/gtable.html

Dr. Coakley:
I will take a look and after that I will send to Dr. Liu for further review.





 
 
 
 
 
